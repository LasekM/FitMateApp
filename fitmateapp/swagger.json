{
  "openapi": "3.0.4",
  "info": {
    "title": "FitMate API",
    "version": "v1"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Local development server"
    }
  ],
  "paths": {
    "/api/analytics/overview": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Pobiera ogólny przegląd statystyk (Dashboard).",
        "description": "Zwraca podsumowanie dla zadanego okresu: całkowita objętość, średnia intensywność, liczba sesji i % realizacji planu.\n\n**Wymagany format dat:** ISO 8601 UTC (np. `2026-11-01T00:00:00Z`).",
        "parameters": [
          {
            "name": "From",
            "in": "query",
            "description": "Start date of the query range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "To",
            "in": "query",
            "description": "End date of the query range (must be after From).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statystyki zostały obliczone.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OverviewDto"
                }
              }
            }
          },
          "400": {
            "description": "Błędny zakres dat (np. To < From).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/analytics/volume": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Analiza objętości treningowej (Volume).",
        "description": "Zwraca dane wykresu objętości (Volume Load = Series * Reps * Weight).\n\n**Opcje grupowania (`groupBy`):**\n* `day` – Suma objętości na każdy dzień treningowy.\n* `week` – Suma objętości na tydzień (format ISO Week, np. \"2025-W45\").\n* `exercise` – Suma objętości per ćwiczenie w całym zadanym okresie.\n\n**Filtrowanie:**\nMożesz ograniczyć wynik do konkretnego ćwiczenia podając `exerciseName`.",
        "parameters": [
          {
            "name": "From",
            "in": "query",
            "description": "Start date of the query range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "To",
            "in": "query",
            "description": "End date of the query range (must be after From).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "GroupBy",
            "in": "query",
            "description": "How to group the volume data: 'day', 'week', or 'exercise'.",
            "schema": {
              "pattern": "(?i)^(day|week|exercise)$",
              "type": "string"
            }
          },
          {
            "name": "ExerciseName",
            "in": "query",
            "description": "Optional filter for a specific exercise name.",
            "schema": {
              "maxLength": 200,
              "minLength": 0,
              "type": "string"
            }
          },
          {
            "name": "GroupByNormalized",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dane objętości.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TimePointDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nieprawidłowy parametr `groupBy` lub zakres dat.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/analytics/exercises/{name}/e1rm": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Historia szacowanego rekordu na 1 powtórzenie (e1RM).",
        "description": "Oblicza e1RM (Estimated 1 Rep Max) dla każdego treningu danego ćwiczenia w zadanym okresie.\n\n**Algorytm:**\nWykorzystywana jest formuła **Epleya**: `Weight * (1 + Reps / 30)`.\n\n**Przykład użycia:**\n\n    GET /api/analytics/exercises/Bench%20Press/e1rm?from=...&to=...",
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "description": "Nazwa ćwiczenia (np. \"Bench Press\").",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "From",
            "in": "query",
            "description": "Start date of the query range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "To",
            "in": "query",
            "description": "End date of the query range (must be after From).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Historia e1RM.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/E1rmPointDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nie podano nazwy ćwiczenia lub błędny zakres dat.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/analytics/adherence": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Statystyki konsekwencji treningowej (Adherence).",
        "description": "Porównuje liczbę zaplanowanych treningów do liczby rzeczywiście zrealizowanych (Completed) w zadanym okresie.\n\n**Ważne:** Parametry daty są tu typu `DateOnly` (format: `yyyy-MM-dd`), a nie DateTime UTC.",
        "parameters": [
          {
            "name": "FromDate",
            "in": "query",
            "description": "Start date of the query range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "ToDate",
            "in": "query",
            "description": "End date of the query range (must be after FromDate).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statystyki adherence.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdherenceDto"
                }
              }
            }
          },
          "400": {
            "description": "Data końcowa jest wcześniejsza niż początkowa.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/analytics/plan-vs-actual": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Porównanie Plan vs Wykonanie dla konkretnej sesji.",
        "description": "Zwraca szczegółową listę serii z danej sesji, pokazując różnice między założeniami (Planned)\na rzeczywistym wykonaniem (Done) dla ciężaru i powtórzeń.",
        "parameters": [
          {
            "name": "SessionId",
            "in": "query",
            "description": "ID of the workout session to compare against its planned workout.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dane porównawcze.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanVsActualItemDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nieprawidłowy identyfikator sesji.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/analytics/exercises": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Pobiera listę wszystkich ćwiczeń wykonanych przez użytkownika.",
        "description": "Zwraca znormalizowaną listę unikalnych ćwiczeń (case-insensitive).\nKażde ćwiczenie zawiera metadane: liczba treningów, pierwsze i ostatnie wykonanie.",
        "parameters": [
          {
            "name": "fromUtc",
            "in": "query",
            "description": "Opcjonalna data początkowa (UTC).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "toUtc",
            "in": "query",
            "description": "Opcjonalna data końcowa (UTC).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista ćwiczeń została pobrana.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ExerciseSummaryDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Rejestracja nowego konta użytkownika.",
        "description": "Tworzy nowego użytkownika w systemie, przypisuje mu domyślną rolę i automatycznie loguje, zwracając tokeny.\n\n**Przykładowe żądanie:**\n\n    POST /api/auth/register\n    {\n       \"email\": \"jan.kowalski@example.com\",\n       \"username\": \"jankowal\",\n       \"password\": \"TrudneHaslo123!\",\n       \"fullName\": \"Jan Kowalski\"\n    }\n\n**Logika biznesowa:**\n* Email i UserName muszą być unikalne.\n* Hasło jest hashowane przed zapisem (BCrypt).",
        "requestBody": {
          "description": "Obiekt DTO zawierający wymagane dane rejestracyjne.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rejestracja przebiegła pomyślnie, zwrócono tokeny.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji lub danych biznesowych.\nMożliwe przyczyny (zwracane w polu `detail` struktury ProblemDetails):\n* \"Email already registered.\"\n* \"Username already registered.\"",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – brak lub błędny token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – brak uprawnień.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logowanie użytkownika.",
        "description": "Weryfikuje poświadczenia i generuje nowe tokeny dostępowe.\n\n**Przykładowe żądanie:**\n\n    POST /api/auth/login\n    {\n       \"userNameOrEmail\": \"jankowal\", \n       \"password\": \"TrudneHaslo123!\"\n    }\n\nUwaga: Pole `userNameOrEmail` akceptuje zarówno login jak i adres e-mail.",
        "requestBody": {
          "description": "Dane logowania (Login/Email + Hasło).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logowanie poprawne.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Błędne dane logowania.\nZwracany komunikat: \"Invalid credentials.\"",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – brak lub błędny token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – brak uprawnień.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Odświeżanie tokena dostępowego (Refresh Token Flow).",
        "description": "Pozwala uzyskać nowy `accessToken` bez konieczności ponownego logowania, używając ważnego `refreshToken`.\n\n**Przykładowe żądanie:**\n\n    POST /api/auth/refresh\n    {\n       \"refreshToken\": \"8a7b...123z\"\n    }",
        "requestBody": {
          "description": "Obiekt DTO zawierający token odświeżania.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token został pomyślnie odświeżony.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Przesłany refresh token jest nieprawidłowy, wygasł lub został unieważniony.\nKomunikat: \"Invalid refresh token.\"",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – brak lub błędny token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – brak uprawnień.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Wylogowanie (Unieważnienie Refresh Tokena).",
        "description": "Usuwa wskazany `refreshToken` z bazy danych, zapobiegając jego dalszemu użyciu do generowania nowych tokenów dostępowych.\nOperacja jest idempotentna – jeśli token nie istnieje, endpoint również zwraca 204.\n\n**Wymagania:**\n* Użytkownik musi być zalogowany (wymagany nagłówek `Authorization: Bearer ...`).",
        "requestBody": {
          "description": "Obiekt zawierający token do unieważnienia.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LogoutRequestDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Pomyślnie wylogowano (token usunięty lub nie istniał)."
          },
          "401": {
            "description": "Brak ważnego tokena dostępowego w nagłówku (użytkownik niezalogowany).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics": {
      "post": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Dodaje nowy pomiar ciała.",
        "description": "Rejestruje nowy pomiar wagi, wzrostu i innych wymiarów.\nBMI jest obliczane automatycznie na podstawie wzrostu i wagi.\n\n**Wymagania:**\n* `WeightKg`: Wartość dodatnia (np. 80.5).\n* `HeightCm`: Wartość dodatnia (np. 180).\n\n**Przykładowe żądanie:**\n\n    POST /api/body-metrics\n    {\n      \"weightKg\": 82.5,\n      \"heightCm\": 178,\n      \"bodyFatPercentage\": 18.5,\n      \"notes\": \"Po treningu\"\n    }",
        "requestBody": {
          "description": "Dane nowego pomiaru.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBodyMeasurementDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBodyMeasurementDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBodyMeasurementDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Pomiar został pomyślnie dodany.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji danych.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Pobiera historię pomiarów w zadanym zakresie dat.",
        "description": "Zwraca listę pomiarów posortowaną malejąco po dacie (najnowsze pierwsze).\nJeśli nie podano dat, zwraca wszystkie dostępne pomiary.",
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "description": "Data początkowa (opcjonalna).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "to",
            "in": "query",
            "description": "Data końcowa (opcjonalna).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista pomiarów (może być pusta).",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMeasurementDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMeasurementDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMeasurementDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics/latest": {
      "get": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Pobiera najnowszy zarejestrowany pomiar.",
        "description": "Przydatne do szybkiego sprawdzenia aktualnej wagi i BMI użytkownika.",
        "responses": {
          "200": {
            "description": "Najnowszy pomiar.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              }
            }
          },
          "404": {
            "description": "Użytkownik nie posiada żadnych pomiarów.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics/stats": {
      "get": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Pobiera podsumowanie statystyk pomiarów.",
        "description": "Zwraca zagregowane dane, takie jak:\n* Aktualna waga i BMI.\n* Najwyższa i najniższa zanotowana waga.\n* Całkowita liczba pomiarów.\n* Kategoria BMI (np. \"Normal\", \"Overweight\").",
        "responses": {
          "200": {
            "description": "Statystyki pomiarów.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMetricsStatsDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMetricsStatsDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMetricsStatsDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics/progress": {
      "get": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Pobiera dane do wykresu progresji w czasie.",
        "description": "Zwraca uproszczoną listę punktów danych (data, waga, BMI) z zadanego okresu,\nidealną do rysowania wykresów liniowych postępu.",
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "description": "Początek okresu wykresu.",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "to",
            "in": "query",
            "description": "Koniec okresu wykresu.",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dane progresji.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMetricsProgressDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMetricsProgressDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BodyMetricsProgressDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics/{id}": {
      "delete": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Usuwa pojedynczy wpis pomiaru.",
        "description": "Trwale usuwa wskazany pomiar z historii użytkownika.\nOperacja jest nieodwracalna.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator pomiaru (GUID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Pomiar został usunięty."
          },
          "404": {
            "description": "Pomiar nie istnieje lub nie należy do użytkownika.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/body-metrics/friends/{friendId}": {
      "get": {
        "tags": [
          "BodyMetrics"
        ],
        "summary": "Pobiera pomiary znajomego (jeśli udostępnił).",
        "parameters": [
          {
            "name": "friendId",
            "in": "path",
            "description": "ID znajomego.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/BodyMeasurementDto"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/{username}": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Wysyła zaproszenie do znajomych (po nazwie użytkownika).",
        "description": "**Logika biznesowa:**\n* Nie można wysłać zaproszenia do samego siebie.\n* Jeśli użytkownicy są już znajomymi, zwrócony zostanie błąd.\n* **Auto-akceptacja:** Jeśli użytkownik, do którego wysyłasz zaproszenie, wcześniej wysłał zaproszenie do Ciebie (status Pending),\nsystem wykryje to i automatycznie nawiąże relację (status Accepted).\n\n**Przykładowe żądanie:**\n\n    POST /api/friends/jankowalski",
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "description": "Unikalna nazwa użytkownika (UserName) adresata.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Zaproszenie wysłane pomyślnie LUB relacja została automatycznie zaakceptowana (gdy istniało zaproszenie zwrotne)."
          },
          "400": {
            "description": "Błąd walidacji logicznej. Przykładowe komunikaty błędów:\n* \"You cannot add yourself.\"\n* \"You are already friends.\"\n* \"A friend request is already in progress.\" (gdy już wysłałeś wcześniej zaproszenie).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono użytkownika o podanej nazwie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/requests/{requestId}/respond": {
      "post": {
        "tags": [
          "Friends"
        ],
        "summary": "Odpowiada na otrzymane zaproszenie (Akceptacja / Odrzucenie).",
        "description": "Pozwala zaakceptować lub odrzucić oczekujące zaproszenie.\nMożna odpowiadać tylko na zaproszenia, w których jest się adresatem (`ToUserId`).\n\n**Przykładowe żądanie (Akceptacja):**\n\n    POST /api/friends/requests/3fa85f64-5717-4562-b3fc-2c963f66afa6/respond\n    {\n       \"accept\": true\n    }",
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "Identyfikator zaproszenia (GUID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Obiekt decyzyjny (Accept = true/false).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RespondFriendRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Decyzja została zapisana (znajomość nawiązana lub zaproszenie odrzucone)."
          },
          "400": {
            "description": "Zaproszenie nie jest w stanie \"Pending\" lub próbujesz odpowiedzieć na własne zaproszenie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Próba odpowiedzi na zaproszenie, które nie jest skierowane do Ciebie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Zaproszenie nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends": {
      "get": {
        "tags": [
          "Friends"
        ],
        "summary": "Pobiera listę aktualnych znajomych.",
        "description": "Zwraca listę użytkowników, z którymi relacja ma status `Accepted`.",
        "responses": {
          "200": {
            "description": "Lista znajomych.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FriendDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/requests/incoming": {
      "get": {
        "tags": [
          "Friends"
        ],
        "summary": "Pobiera listę oczekujących zaproszeń przychodzących.",
        "description": "Są to zaproszenia wysłane przez inne osoby do aktualnie zalogowanego użytkownika.",
        "responses": {
          "200": {
            "description": "Lista zaproszeń do rozpatrzenia.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FriendRequestDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/requests/outgoing": {
      "get": {
        "tags": [
          "Friends"
        ],
        "summary": "Pobiera listę wysłanych zaproszeń (wychodzących).",
        "description": "Są to zaproszenia wysłane przez Ciebie, które wciąż oczekują na decyzję drugiej strony (status `Pending`).",
        "responses": {
          "200": {
            "description": "Lista wysłanych, oczekujących zaproszeń.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FriendRequestDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/{friendUserId}": {
      "delete": {
        "tags": [
          "Friends"
        ],
        "summary": "Usuwa użytkownika z listy znajomych.",
        "description": "Trwale usuwa relację znajomości (status `Accepted`). Operacja jest dwustronna – użytkownik znika również z listy znajomych drugiej osoby.",
        "parameters": [
          {
            "name": "friendUserId",
            "in": "path",
            "description": "Identyfikator użytkownika (GUID), którego chcemy usunąć.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Znajomy został usunięty pomyślnie."
          },
          "404": {
            "description": "Taka relacja nie istnieje (nie jesteście znajomymi).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/workouts/scheduled": {
      "get": {
        "tags": [
          "FriendsWorkouts"
        ],
        "summary": "Pobiera kalendarz treningowy znajomych w zadanym przedziale dat.",
        "description": "Zwraca listę zaplanowanych treningów (Scheduled Workouts) należących do Twoich znajomych.\n\n**Zasady filtrowania:**\n* Uwzględniani są tylko znajomi ze statusem relacji `Accepted`.\n* Trening musi mieć ustawioną flagę `IsVisibleToFriends = true`.\n* Przedział dat jest domknięty (włącznie z `from` i `to`).\n\n**Wymagany format daty:** `yyyy-MM-dd`\n\n**Przykładowe zapytanie:**\n\n    GET /api/friends/workouts/scheduled?from=2026-11-01&to=2026-11-30",
        "parameters": [
          {
            "name": "From",
            "in": "query",
            "description": "Start date of the range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "To",
            "in": "query",
            "description": "End date of the range.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pobrano listę treningów.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FriendScheduledWorkoutDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Niepoprawny format daty lub błąd logiczny (np. data \"Do\" jest wcześniejsza niż \"Od\").",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/friends/workouts/sessions": {
      "get": {
        "tags": [
          "FriendsWorkouts"
        ],
        "summary": "Pobiera historię sesji treningowych znajomych w zadanym przedziale czasu.",
        "description": "Zwraca listę sesji (rozpoczętych/zakończonych treningów) Twoich znajomych.\n\n**Zasady filtrowania:**\n* Zakres dotyczy daty rozpoczęcia sesji (`StartedAtUtc`).\n* Zwracane są sesje powiązane z zaplanowanymi treningami, które są publiczne dla znajomych.\n* Przedział czasu jest lewostronnie domknięty: `start >= fromUtc` oraz `start < toUtc`.\n\n**Wymagany format:** ISO 8601 UTC (np. `2026-11-01T15:30:00Z`).\n\n**Przykładowe zapytanie:**\n\n    GET /api/friends/workouts/sessions?fromUtc=2026-11-01T00:00:00Z&toUtc=2026-11-02T00:00:00Z",
        "parameters": [
          {
            "name": "FromUtc",
            "in": "query",
            "description": "Start date and time of the range (UTC).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "ToUtc",
            "in": "query",
            "description": "End date and time of the range (UTC).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pobrano listę sesji.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FriendWorkoutSessionDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Niepoprawny format ISO 8601 lub data końcowa jest wcześniejsza niż początkowa.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Tworzy nowy plan treningowy.",
        "description": "Tworzy plan z listą ćwiczeń i serii, przypisując go do aktualnie zalogowanego użytkownika.\n\n**Ograniczenia walidacji:**\n* `PlanName`: 3-100 znaków.\n* `Type`: 2-50 znaków (np. \"Split\", \"FBW\").\n* `Exercises`: Max 100 ćwiczeń w planie.\n* `Sets`: Max 50 serii na ćwiczenie.\n\n**Przykładowe żądanie:**\n\n    POST /api/plans\n    {\n      \"planName\": \"Mój Plan Siłowy\",\n      \"type\": \"Push Pull\",\n      \"notes\": \"Trening 4x w tygodniu\",\n      \"exercises\": [\n        {\n          \"name\": \"Wyciskanie sztangi\",\n          \"rest\": 120,\n          \"sets\": [\n            { \"reps\": 8, \"weight\": 80 },\n            { \"reps\": 8, \"weight\": 80 }\n          ]\n        }\n      ]\n    }",
        "requestBody": {
          "description": "Kompletny obiekt planu wraz z ćwiczeniami.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Plan został pomyślnie utworzony.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji danych wejściowych (np. pusta nazwa, brak ćwiczeń).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Pobiera listę planów użytkownika.",
        "description": "Zwraca plany stworzone przez zalogowanego użytkownika. Opcjonalnie może zwrócić również plany,\nktóre inni użytkownicy udostępnili Tobie (i które zaakceptowałeś).",
        "parameters": [
          {
            "name": "includeShared",
            "in": "query",
            "description": "Jeśli `true`, lista zawiera również plany udostępnione (status `Accepted`). \nDomyślnie `false` (tylko własne).",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista planów.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/{id}": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Pobiera szczegóły konkretnego planu.",
        "description": "Zwraca pełną strukturę planu (ćwiczenia, serie).\nDostępne tylko dla właściciela planu.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator planu (GUID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Szczegóły planu.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDto"
                }
              }
            }
          },
          "404": {
            "description": "Plan nie istnieje lub nie masz do niego dostępu.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "put": {
        "tags": [
          "Plans"
        ],
        "summary": "Aktualizuje istniejący plan.",
        "description": "Nadpisuje dane planu (nazwę, notatki, typ) oraz **wymienia całą listę ćwiczeń** na nową.\nStare ćwiczenia i serie w tym planie są usuwane i zastępowane tymi z żądania.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator edytowanego planu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Nowa definicja planu.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan zaktualizowany pomyślnie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Plan nie istnieje lub nie jest Twój.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "Plans"
        ],
        "summary": "Usuwa plan treningowy.",
        "description": "Trwale usuwa plan wraz ze wszystkimi ćwiczeniami i seriami.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator planu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Plan usunięty."
          },
          "404": {
            "description": "Plan nie istnieje lub nie jest Twój.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/{id}/duplicate": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Duplikuje (kopiuje) istniejący plan.",
        "description": "Tworzy głęboką kopię planu (wraz z ćwiczeniami i seriami), dodając do nazwy dopisek \"(Copy)\".\nNowy plan staje się własnością użytkownika wykonującego akcję.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator planu źródłowego.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Kopia planu została utworzona.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDto"
                }
              }
            }
          },
          "404": {
            "description": "Plan źródłowy nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/{planId}/share-to/{targetUserId}": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Udostępnia plan innemu użytkownikowi.",
        "description": "Wysyła zaproszenie do współdzielenia planu. Odbiorca zobaczy je w sekcji \"Pending\" i będzie mógł je zaakceptować.\n\n**Ograniczenia:**\n* Nie możesz udostępnić planu samemu sobie.\n* Nie możesz udostępnić planu, który nie należy do Ciebie.\n* Jeśli plan jest już udostępniony tej osobie (nawet w statusie Pending), operacja zwróci błąd.",
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "description": "Identyfikator Twojego planu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "targetUserId",
            "in": "path",
            "description": "Identyfikator użytkownika (GUID), któremu chcesz pokazać plan.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Zaproszenie do udostępnienia zostało wysłane."
          },
          "400": {
            "description": "Błąd biznesowy (np. już udostępniono, target == user).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono planu lub użytkownika docelowego.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared-with-me": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Pobiera listę planów udostępnionych MI przez innych (status Accepted).",
        "description": "Są to \"cudze\" plany, do których użytkownik uzyskał dostęp i je zaakceptował.",
        "responses": {
          "200": {
            "description": "Lista planów.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/pending": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Pobiera otrzymane zaproszenia do planów (Oczekujące).",
        "description": "Lista udostępnień skierowanych do Ciebie, które mają status `Pending` (czekają na decyzję).",
        "responses": {
          "200": {
            "description": "Lista oczekujących udostępnień (Przychodzące).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SharedPlanDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/sent/pending": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Pobiera wysłane zaproszenia do planów (Oczekujące).",
        "description": "Lista udostępnień, które Ty wysłałeś innym, ale oni jeszcze nie podjęli decyzji (status `Pending`).",
        "responses": {
          "200": {
            "description": "Lista oczekujących udostępnień (Wychodzące).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SharedPlanDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/{sharedPlanId}/respond": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "Decyzja o przyjęciu lub odrzuceniu udostępnionego planu.",
        "description": "Pozwala zmienić status zaproszenia z `Pending` na `Accepted` lub `Rejected`.\n\n**Przykład ciała żądania:**\n\n    { \"accept\": true }",
        "parameters": [
          {
            "name": "sharedPlanId",
            "in": "path",
            "description": "Identyfikator wpisu udostępnienia (SharedPlan ID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Obiekt decyzyjny.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RespondSharedPlanRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status zaktualizowany."
          },
          "400": {
            "description": "Zaproszenie nie jest już w statusie Pending.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono zaproszenia.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/history": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "Historia udostępnień (Zakończone).",
        "description": "Zwraca historię udostępnień, które zostały już rozpatrzone (status `Accepted` lub `Rejected`).\nPlany w statusie `Pending` są pomijane (do tego służą osobne endpointy).\n\n**Parametr scope:**\n* `received` (domyślny) – Plany otrzymane od innych.\n* `sent` – Plany wysłane przez Ciebie innym.\n* `all` – Wszystkie powiązane z Tobą.",
        "parameters": [
          {
            "name": "scope",
            "in": "query",
            "description": "Zakres historii: `received`, `sent`, `all`.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SharedPlanDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/{sharedPlanId}": {
      "delete": {
        "tags": [
          "Plans"
        ],
        "summary": "Usuwa lub anuluje udostępnienie planu.",
        "description": "Pozwala wycofać udostępnienie (jeśli jesteś nadawcą) lub usunąć plan z listy \"Udostępnione mi\" (jeśli jesteś odbiorcą).\n\n**Tryb onlyPending:**\n* Jeśli `true`: Usuwa wpis TYLKO jeśli jest w statusie `Pending` (anulowanie zaproszenia).\n* Jeśli `false` (domyślnie): Usuwa wpis bez względu na status (np. odebranie dostępu po czasie).",
        "parameters": [
          {
            "name": "sharedPlanId",
            "in": "path",
            "description": "Identyfikator wpisu udostępnienia.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "onlyPending",
            "in": "query",
            "description": "Czy ograniczyć usuwanie tylko do oczekujących zaproszeń.",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Udostępnienie usunięte."
          },
          "400": {
            "description": "Błąd logiczny (np. wymuszono onlyPending, a status był Accepted).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono wpisu udostępnienia.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/plans/shared/by-plan/{planId}": {
      "delete": {
        "tags": [
          "Plans"
        ],
        "summary": "Usuwa udostępniony plan na podstawie ID planu (wygodne dla frontendu).",
        "description": "Usuwa wpis udostępnienia (SharedPlan) dla zalogowanego użytkownika na podstawie ID planu.\nDziała to analogicznie do usunięcia przez ID udostępnienia, ale pozwala frontendowi użyć ID planu, który już zna.",
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "description": "Identyfikator planu (nie SharedPlanId).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Udostępnienie usunięte."
          },
          "404": {
            "description": "Nie znaleziono wpisu udostępnienia dla tego planu.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled": {
      "post": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Planuje nowy trening w kalendarzu.",
        "description": "Tworzy wpis w kalendarzu na podstawie istniejącego `PlanId`.\n\n**Logika działania:**\n* Jeśli lista `Exercises` jest pusta (lub null), system automatycznie skopiuje ćwiczenia z planu bazowego (`PlanId`).\n* Jeśli przekażesz `Exercises`, nadpiszą one domyślny zestaw z planu (pozwala to modyfikować trening tylko na ten jeden dzień).\n\n**Formatowanie:**\n* `Date`: Wymagany format `yyyy-MM-dd` (np. \"2026-11-15\").\n* `Time`: Opcjonalny format `HH:mm` (np. \"18:30\").\n\n**Przykładowe żądanie:**\n\n    POST /api/scheduled\n    {\n      \"date\": \"2026-11-15\",\n      \"time\": \"18:00\",\n      \"planId\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\n      \"status\": \"planned\",\n      \"visibleToFriends\": true\n    }",
        "requestBody": {
          "description": "Obiekt tworzenia zaplanowanego treningu.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateScheduledDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Trening został pomyślnie zaplanowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduledDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji danych (np. zły format daty) lub status inny niż 'planned'/'completed'.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Podany `PlanId` nie istnieje lub nie należy do użytkownika.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Pobiera listę wszystkich zaplanowanych treningów użytkownika.",
        "description": "Zwraca pełną listę treningów (historię oraz przyszłe plany), posortowaną chronologicznie (Data -> Czas).",
        "responses": {
          "200": {
            "description": "Lista treningów.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduledDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled/{id}": {
      "get": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Pobiera szczegóły konkretnego treningu z kalendarza.",
        "operationId": "GetScheduledById",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator zaplanowanego treningu (GUID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Szczegóły treningu (wraz z ćwiczeniami i seriami).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduledDto"
                }
              }
            }
          },
          "404": {
            "description": "Trening nie istnieje lub nie należy do zalogowanego użytkownika.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "put": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Aktualizuje istniejący trening w kalendarzu.",
        "description": "Pozwala zmienić datę, godzinę, notatki, status (np. na \"completed\") lub zmodyfikować listę ćwiczeń.\n\n**Uwaga:** Przesłanie nowej listy `Exercises` całkowicie zastępuje starą listę ćwiczeń i serii dla tego wpisu.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator edytowanego wpisu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Nowe dane treningu.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateScheduledDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Zaktualizowany trening.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduledDto"
                }
              }
            }
          },
          "404": {
            "description": "Wpis nie istnieje lub plan bazowy (PlanId) został usunięty.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji (np. format daty).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Usuwa zaplanowany trening z kalendarza.",
        "description": "Operacja jest nieodwracalna. Usuwa wpis wraz z przypisanymi do niego seriami/ćwiczeniami (Cascade Delete).",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator wpisu do usunięcia.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Wpis został usunięty."
          },
          "404": {
            "description": "Wpis nie istnieje lub nie należy do użytkownika.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled/by-date": {
      "get": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Pobiera treningi zaplanowane na konkretny dzień.",
        "description": "Filtruje listę treningów po dacie.\n\n**Przykładowe użycie:**\n\n    GET /api/scheduled/by-date?date=2026-10-25",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "description": "Data w formacie `yyyy-MM-dd`.",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista treningów (może być pusta).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduledDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Podano datę w nieprawidłowym formacie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled/{id}/duplicate": {
      "post": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Duplikuje istniejący wpis w kalendarzu.",
        "description": "Duplikuje zaplanowany trening (taka sama data, czas i ćwiczenia), ale z nowym ID.\nPrzydatne np. gdy użytkownik chce zrobić ten sam trening dwa razy dziennie lub szybko skopiować ustawienia.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator wpisu źródłowego.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Kopia została utworzona pomyślnie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduledDto"
                }
              }
            }
          },
          "404": {
            "description": "Wpis źródłowy nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled/{id}/complete": {
      "post": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Przekształca zaplanowany trening w zakończoną sesję.",
        "description": "Pozwala oznaczyć trening jako wykonany bez konieczności przechodzenia przez tryb \"Live Session\".\nTworzy nową sesję ze statusem `Completed` i kopiuje do niej ćwiczenia z planu.\nJeśli `populateActuals` jest ustawione na `true`, wartości planowane (ciężar, powtórzenia) są kopiowane jako wykonane.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator zaplanowanego treningu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Opcjonalne parametry (czas rozpoczęcia/zakończenia, notatki).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteScheduledRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sesja została utworzona.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Trening jest już zakończony lub sesja już istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono zaplanowanego treningu.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/scheduled/{id}/reopen": {
      "post": {
        "tags": [
          "Scheduled"
        ],
        "summary": "Przywraca zakończony/przerwany trening do statusu \"Zaplanowany\".",
        "description": "Pozwala cofnąć przypadkowe oznaczenie treningu jako zakończonego lub przerwać przerwany trening.\n\n**Warunki:**\n- Działa tylko dla sesji utworzonych przez quick complete (`scheduled/{id}/complete`) lub przerwanych (`Aborted`)\n- Nie można przywrócić sesji zakończonej normalnie przez live workout\n- Nie może istnieć aktywna sesja dla tego zaplanowanego treningu\n\n**Akcja:**\n- Usuwa sesję treningową (wraz z ćwiczeniami i seriami)\n- Zmienia status zaplanowanego treningu na `Planned`\n\n**Przykładowy scenariusz użycia:**\nUżytkownik przez pomyłkę kliknął \"Zakończ trening\" zamiast \"Rozpocznij trening\".",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator zaplanowanego treningu.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Trening został przywrócony do statusu zaplanowanego."
          },
          "400": {
            "description": "Nie można przywrócić tego treningu. Możliwe przyczyny:\n- Sesja została zakończona normalnie przez live workout (nie quick complete)\n- Istnieje aktywna sesja dla tego treningu",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono zaplanowanego treningu lub sesji.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/start": {
      "post": {
        "tags": [
          "Sessions"
        ],
        "summary": "Rozpoczyna nową sesję treningową (Live Workout).",
        "description": "Tworzy nową sesję na podstawie zaplanowanego treningu (`ScheduledWorkout`).\nKopiuje wszystkie ćwiczenia i serie z planu do sesji, ustawiając jej status na `in_progress`.\n\n**Działanie:**\n* Wymaga podania ID zaplanowanego treningu.\n* Jeśli zaplanowany trening nie istnieje lub nie należy do użytkownika, zwraca 404.\n\n**Przykładowe żądanie:**\n\n    POST /api/sessions/start\n    {\n       \"scheduledId\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\"\n    }",
        "requestBody": {
          "description": "Obiekt zawierający ID zaplanowanego treningu.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartSessionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sesja została wystartowana.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji (np. pusty GUID).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono zaplanowanego treningu.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/{sessionId}/sets/{setId}": {
      "patch": {
        "tags": [
          "Sessions"
        ],
        "summary": "Częściowo aktualizuje wyniki pojedynczej serii w trakcie sesji.",
        "description": "Aktualizuje dane o wykonanej serii (powtórzenia, ciężar, RPE) w trwającej sesji.\n\n**Logika biznesowa:**\n* Sesja musi być w statusie `in_progress`.\n* Identyfikacja serii odbywa się poprzez `ExerciseOrder` (kolejność ćwiczenia) oraz `SetNumber` (numer serii).\n* Nie musisz przesyłać wszystkich pól – metoda służy do aktualizacji \"na bieżąco\".\n\n**Przykładowe żądanie:**\n\n    PATCH /api/sessions/{id}/set\n    {\n       \"exerciseOrder\": 1,\n       \"setNumber\": 2,\n       \"repsDone\": 10,\n       \"weightDone\": 80.5,\n       \"rpe\": 8,\n       \"isFailure\": false\n    }",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "description": "Identyfikator trwającej sesji.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "setId",
            "in": "path",
            "description": "Identyfikator serii.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Dane aktualizujące serię.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatchSetRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Seria została zaktualizowana.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji (np. ujemne wartości) LUB sesja nie jest w toku (np. jest już zakończona).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Sesja, ćwiczenie lub seria nie została znaleziona.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/{id}/exercises": {
      "post": {
        "tags": [
          "Sessions"
        ],
        "summary": "Dodaje dodatkowe ćwiczenie do trwającej sesji (Ad-Hoc).",
        "description": "Pozwala dodać niezaplanowane wcześniej ćwiczenie do aktywnej sesji.\n\n**Zasady:**\n* Ćwiczenie jest dodawane tylko do tej konkretnej sesji (nie zmienia planu treningowego).\n* Jeśli nie podasz `Order`, ćwiczenie zostanie dodane na koniec listy.\n* Wymagane jest zdefiniowanie przynajmniej jednej serii.\n\n**Przykładowe żądanie:**\n\n    POST /api/sessions/{id}/exercises\n    {\n       \"name\": \"Dodatkowe Pompki\",\n       \"restSecPlanned\": 60,\n       \"sets\": [\n          { \"repsPlanned\": 15, \"weightPlanned\": 0 }\n       ]\n    }",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator sesji.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Definicja nowego ćwiczenia.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSessionExerciseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ćwiczenie dodane pomyślnie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji lub sesja nie jest w toku.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Sesja nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/{id}/complete": {
      "post": {
        "tags": [
          "Sessions"
        ],
        "summary": "Kończy sesję treningową (Success).",
        "description": "Zmienia status sesji na `completed`, wylicza czas trwania i oznacza powiązany plan w kalendarzu jako wykonany.\nPo wykonaniu tej operacji nie można już modyfikować serii ani dodawać ćwiczeń.\n\n**Opcjonalne parametry:**\n* `CompletedAtUtc`: Czas zakończenia (domyślnie `DateTime.UtcNow`).\n* `SessionNotes`: Notatka końcowa do treningu.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator sesji.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Opcjonalne dane kończące sesję.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesja zakończona pomyślnie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Próba zakończenia sesji, która nie jest w toku.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Sesja nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/{id}/abort": {
      "post": {
        "tags": [
          "Sessions"
        ],
        "summary": "Przerywa/Anuluje sesję treningową.",
        "description": "Zmienia status sesji na `aborted`. Używane, gdy użytkownik musi nagle przerwać trening (np. kontuzja, brak czasu).",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator sesji.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Powód przerwania sesji.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AbortSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesja została anulowana.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "400": {
            "description": "Próba anulowania sesji, która nie jest w toku.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Sesja nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/{id}": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Pobiera szczegóły sesji treningowej.",
        "description": "Zwraca pełny stan sesji: status, czasy, listę ćwiczeń oraz stan wszystkich serii.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator sesji.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Szczegóły sesji.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkoutSessionDto"
                }
              }
            }
          },
          "404": {
            "description": "Sesja nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/sessions/by-range": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Pobiera historię sesji w zadanym przedziale czasu.",
        "description": "Służy do wyświetlania historii treningów lub statystyk.\nDaty powinny być przekazane w formacie ISO 8601 (UTC).\n\n**Przykładowe zapytanie:**\n\n    GET /api/sessions/by-range?fromUtc=2026-11-01T00:00:00Z&toUtc=2026-11-30T23:59:59Z",
        "parameters": [
          {
            "name": "FromUtc",
            "in": "query",
            "description": "Start date and time of the range (UTC).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "ToUtc",
            "in": "query",
            "description": "End date and time of the range (UTC).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista sesji.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WorkoutSessionDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nieprawidłowy zakres dat (np. To < From).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/userprofile": {
      "get": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Pobiera dane profilowe zalogowanego użytkownika.",
        "description": "Zwraca podstawowe informacje o koncie (ID, login, email, imię i nazwisko) oraz listę przypisanych ról.\nIdentyfikacja użytkownika odbywa się na podstawie tokena JWT (Claims).",
        "responses": {
          "200": {
            "description": "Zwraca dane profilowe.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany (brak lub nieważny token).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono użytkownika w bazie (np. konto usunięte, a token jeszcze ważny).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "put": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Aktualizuje dane profilowe (Imię, Email, Login).",
        "description": "Pozwala użytkownikowi na samodzielną edycję swoich danych.\n\n**Przykładowe żądanie:**\n\n    PUT /api/userprofile\n    {\n       \"userName\": \"nowy_nick\",\n       \"fullName\": \"Jan Kowalski\",\n       \"email\": \"jan.kowalski@example.com\"\n    }\n\n**Zasady walidacji:**\n* `UserName`: Unikalny w systemie, bez spacji.\n* `Email`: Unikalny w systemie, poprawny format.",
        "requestBody": {
          "description": "Obiekt z nowymi danymi.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dane zostały zaktualizowane.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji lub konflikt danych.\nMożliwe komunikaty:\n* \"This username is already taken.\"\n* \"This email is already in use.\"\n* \"UserName cannot contain spaces.\"",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Usuwa konto zalogowanego użytkownika.",
        "description": "**Uwaga:** Operacja jest nieodwracalna. Wymaga podania hasła.\nWszystkie powiązane dane (plany, sesje treningowe, przyjaźnie, pomiary) zostaną automatycznie usunięte.",
        "requestBody": {
          "description": "Obiekt zawierający hasło użytkownika.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteAccountDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Konto zostało pomyślnie usunięte."
          },
          "400": {
            "description": "Błąd walidacji lub nieprawidłowe hasło.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/userprofile/change-password": {
      "post": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Zmienia hasło zalogowanego użytkownika.",
        "description": "Wymaga podania aktualnego hasła w celu weryfikacji tożsamości.\n\n**Przykładowe żądanie:**\n\n    POST /api/userprofile/change-password\n    {\n       \"currentPassword\": \"StareHaslo123!\",\n       \"newPassword\": \"NoweSuperHaslo1!\",\n       \"confirmPassword\": \"NoweSuperHaslo1!\"\n    }\n    \n**Wymagania nowego hasła:**\n* Minimum 8 znaków.\n* Przynajmniej jedna litera i jedna cyfra.\n* `ConfirmPassword` musi być identyczne jak `NewPassword`.",
        "requestBody": {
          "description": "Dane do zmiany hasła.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Hasło zostało pomyślnie zmienione."
          },
          "400": {
            "description": "Błąd walidacji (np. hasło za słabe) lub nieprawidłowe stare hasło.\nKomunikat: \"Current password is incorrect.\"",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/userprofile/target-weight": {
      "get": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Pobiera wagę docelową użytkownika.",
        "responses": {
          "200": {
            "description": "Zwraca wagę docelową.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TargetWeightDto"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "put": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Ustawia lub usuwa wagę docelową użytkownika.",
        "description": "Pozwala na:\n* Ustawienie wagi docelowej (40-200 kg)\n* Usunięcie wagi docelowej (null lub 0)\n\n**Przykładowe żądania:**\n\n    PUT /api/userprofile/target-weight\n    { \"targetWeightKg\": 75.5 }\n    \n    PUT /api/userprofile/target-weight\n    { \"targetWeightKg\": null }\n    \n    PUT /api/userprofile/target-weight\n    { \"targetWeightKg\": 0 }",
        "requestBody": {
          "description": "Waga docelowa (40-200 kg, null lub 0 czyści).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTargetWeightRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Waga docelowa została zaktualizowana."
          },
          "400": {
            "description": "Błąd walidacji (waga poza zakresem 40-200 kg).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/userprofile/biometrics-privacy": {
      "put": {
        "tags": [
          "UserProfile"
        ],
        "summary": "Zmienia ustawienie widoczności danych biometrycznych dla znajomych.",
        "description": "Kontroluje czy znajomi mogą widzieć:\n* Wagę docelową\n* Pomiary ciała (BodyMeasurements)\n* Aktualna wagę\n\n**Przykładowe żądanie:**\n\n    PUT /api/userprofile/biometrics-privacy\n    { \"shareWithFriends\": true }",
        "requestBody": {
          "description": "Ustawienie widoczności.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBiometricsPrivacyRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Ustawienie zostało zaktualizowane."
          },
          "400": {
            "description": "Błąd walidacji.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Użytkownik niezalogowany.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Pobiera listę wszystkich użytkowników.",
        "description": "Pozwala na filtrowanie wyników. Wyszukiwanie jest \"case-insensitive\" (niewrażliwe na wielkość liter).\n\n**Przykładowe żądanie:**\n\n    GET /api/users?search=kowalski",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "description": "(Opcjonalne) Fraza filtrująca. Przeszukuje pola: `FullName`, `Email` oraz `UserName`.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Zwraca listę użytkowników (pustą, jeśli nie znaleziono pasujących).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Brak autoryzacji lub niewystarczające uprawnienia (wymagana rola Admin).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Tworzy nowego użytkownika (ręcznie przez Admina).",
        "description": "Umożliwia administratorowi dodanie użytkownika z pominięciem procesu rejestracji publicznej.\n\n**Przykładowe żądanie:**\n\n    POST /api/users\n    {\n       \"fullName\": \"Nowy Pracownik\",\n       \"email\": \"pracownik@firma.com\",\n       \"userName\": \"nowy_pracownik\"\n    }\n    \n**Uwaga:** Hasło nie jest ustawiane w tym kroku (lub jest puste/domyślne, zależnie od logiki encji), \nadministrator powinien użyć endpointu resetowania hasła lub użytkownik powinien skorzystać z procesu \"Zapomniałem hasła\".",
        "requestBody": {
          "description": "Dane nowego użytkownika.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Użytkownik został utworzony pomyślnie.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "400": {
            "description": "Błąd walidacji danych lub konflikt biznesowy (np. zajęty email/login).\nSzczegóły błędu znajdują się w ciele odpowiedzi (ProblemDetails).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/users/{id}": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Aktualizuje dane istniejącego użytkownika.",
        "description": "Pozwala zmienić nazwę wyświetlaną, email lub nazwę użytkownika.\n\n**Przykładowe żądanie:**\n\n    PUT /api/users/3fa85f64-5717-4562-b3fc-2c963f66afa6\n    {\n       \"fullName\": \"Zaktualizowany Jan\",\n       \"email\": \"nowy.email@firma.com\",\n       \"userName\": \"jan.nowy\"\n    }",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator użytkownika (GUID).",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Zmienione dane.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Dane zostały zaktualizowane."
          },
          "400": {
            "description": "Błąd walidacji lub konflikt (np. nowy email jest już zajęty).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Użytkownik o podanym ID nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Usuwa użytkownika z systemu.",
        "description": "**Ważne:** Nie można usunąć użytkownika posiadającego rolę `Admin` ze względów bezpieczeństwa.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator użytkownika do usunięcia.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Użytkownik został usunięty."
          },
          "400": {
            "description": "Próba usunięcia administratora (operacja zabroniona).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Użytkownik nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/users/{id}/role": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Przypisuje rolę systemową do użytkownika.",
        "description": "Służy do nadawania uprawnień (np. awans na Admina).\n\n**Przykładowe użycie:**\n\n    PUT /api/users/{id}/role?roleName=Admin",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator użytkownika.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "roleName",
            "in": "query",
            "description": "Nazwa roli (np. `Admin`, `User`). Wielkość liter ma znaczenie.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Rola została pomyślnie przypisana."
          },
          "400": {
            "description": "Podano nieprawidłową nazwę roli (lub rola nie istnieje w bazie).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Nie znaleziono użytkownika o podanym ID.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "409": {
            "description": "Konflikt – użytkownik posiada już przypisaną tę rolę.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/users/{id}/reset-password": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Resetuje hasło użytkownika (wymuszenie zmiany).",
        "description": "Administrator ustawia nowe hasło dla wskazanego użytkownika. Stare hasło zostaje nadpisane nowym hashem.\n\n**Przykładowe żądanie:**\n\n    POST /api/users/{id}/reset-password\n    {\n       \"newPassword\": \"SuperTajneHaslo123!\"\n    }",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identyfikator użytkownika.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Obiekt zawierający nowe hasło (minimum 8 znaków).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Hasło zostało pomyślnie zmienione."
          },
          "400": {
            "description": "Hasło nie spełnia wymagań walidacji (np. za krótkie).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Użytkownik nie istnieje.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/api/users/search": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Wyszukuje użytkowników na podstawie filtra.",
        "description": "Endpoint dostępny dla wszystkich zalogowanych użytkowników.\nZwraca listę użytkowników pasujących do frazy (username, email, fullname).",
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "description": "Fraza wyszukiwania (wymagana).",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista użytkowników.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserSummaryDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        },
        "security": [
          {
            "oauth2": [ ]
          }
        ]
      }
    },
    "/": {
      "get": {
        "tags": [
          "WebApi"
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – brak lub błędny token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – brak uprawnień.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        }
      }
    },
    "/health/db": {
      "get": {
        "tags": [
          "WebApi"
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad request / validation or business error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/400",
                  "title": "One or more validation errors occurred.",
                  "status": 400,
                  "traceId": "00-0123456789abcdef0123456789abcdef-0123456789abcdef-00"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized – brak lub błędny token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/401",
                  "title": "Unauthorized",
                  "status": 401
                }
              }
            }
          },
          "403": {
            "description": "Forbidden – brak uprawnień.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/403",
                  "title": "Forbidden",
                  "status": 403
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/404",
                  "title": "Not Found",
                  "status": 404
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                },
                "example": {
                  "type": "https://httpstatuses.com/500",
                  "title": "An unexpected error occurred.",
                  "status": 500
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AbortSessionRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "maxLength": 500,
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to abort a workout session."
      },
      "AddSessionExerciseRequest": {
        "required": [
          "name",
          "sets"
        ],
        "type": "object",
        "properties": {
          "order": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "description": "Order of the exercise in the session.",
            "format": "int32",
            "nullable": true
          },
          "name": {
            "maxLength": 200,
            "minLength": 1,
            "type": "string",
            "description": "Name of the exercise."
          },
          "restSecPlanned": {
            "maximum": 2147483647,
            "minimum": 0,
            "type": "integer",
            "description": "Planned rest time in seconds.",
            "format": "int32",
            "nullable": true
          },
          "sets": {
            "minItems": 1,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AddSessionSetRequest"
            },
            "description": "List of sets to add for this exercise."
          }
        },
        "additionalProperties": false,
        "description": "Request to add a new exercise to an active workout session."
      },
      "AddSessionSetRequest": {
        "type": "object",
        "properties": {
          "setNumber": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "description": "Set number (1-based).",
            "format": "int32",
            "nullable": true
          },
          "repsPlanned": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "description": "Planned number of repetitions.",
            "format": "int32"
          },
          "weightPlanned": {
            "minimum": 0,
            "type": "number",
            "description": "Planned weight.",
            "format": "double"
          }
        },
        "additionalProperties": false,
        "description": "Request to add a set to a session exercise."
      },
      "AdherenceDto": {
        "type": "object",
        "properties": {
          "planned": {
            "type": "integer",
            "description": "Number of planned workouts in the period.",
            "format": "int32"
          },
          "completed": {
            "type": "integer",
            "description": "Number of completed workouts in the period.",
            "format": "int32"
          },
          "missed": {
            "type": "integer",
            "description": "Number of missed workouts (Planned - Completed).",
            "format": "int32",
            "readOnly": true
          },
          "adherencePct": {
            "type": "number",
            "description": "Adherence percentage (Completed / Planned × 100), rounded to 1 decimal place.",
            "format": "double",
            "readOnly": true
          }
        },
        "additionalProperties": false,
        "description": "Represents adherence statistics."
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "nullable": true
          },
          "expiresAtUtc": {
            "type": "string",
            "format": "date-time"
          },
          "refreshToken": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Response containing authentication tokens."
      },
      "BodyMeasurementDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the measurement.",
            "format": "uuid"
          },
          "measuredAtUtc": {
            "type": "string",
            "description": "Date and time when the measurement was taken.",
            "format": "date-time"
          },
          "weightKg": {
            "type": "number",
            "description": "Body weight in kilograms.",
            "format": "double"
          },
          "heightCm": {
            "type": "integer",
            "description": "Height in centimeters.",
            "format": "int32"
          },
          "bmi": {
            "type": "number",
            "description": "Calculated Body Mass Index.",
            "format": "double"
          },
          "bodyFatPercentage": {
            "type": "number",
            "description": "Optional body fat percentage.",
            "format": "double",
            "nullable": true
          },
          "chestCm": {
            "type": "integer",
            "description": "Optional chest circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "waistCm": {
            "type": "integer",
            "description": "Optional waist circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "hipsCm": {
            "type": "integer",
            "description": "Optional hips circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "bicepsCm": {
            "type": "integer",
            "description": "Optional biceps circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "thighsCm": {
            "type": "integer",
            "description": "Optional thighs circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "description": "Optional notes about the measurement.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a body measurement record."
      },
      "BodyMetricsProgressDto": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "Date of the measurement.",
            "format": "date-time"
          },
          "weightKg": {
            "type": "number",
            "description": "Weight in kilograms.",
            "format": "double"
          },
          "bmi": {
            "type": "number",
            "description": "Body Mass Index.",
            "format": "double"
          }
        },
        "additionalProperties": false,
        "description": "Represents a data point for body metrics progress over time."
      },
      "BodyMetricsStatsDto": {
        "type": "object",
        "properties": {
          "currentWeightKg": {
            "type": "number",
            "description": "Current weight in kilograms.",
            "format": "double",
            "nullable": true
          },
          "currentBMI": {
            "type": "number",
            "description": "Current Body Mass Index.",
            "format": "double",
            "nullable": true
          },
          "bmiCategory": {
            "type": "string",
            "description": "BMI category (Underweight, Normal, Overweight, Obese).",
            "nullable": true
          },
          "weightChangeLast30Days": {
            "type": "number",
            "description": "Weight change in the last 30 days.",
            "format": "double",
            "nullable": true
          },
          "lowestWeight": {
            "type": "number",
            "description": "Lowest recorded weight.",
            "format": "double",
            "nullable": true
          },
          "highestWeight": {
            "type": "number",
            "description": "Highest recorded weight.",
            "format": "double",
            "nullable": true
          },
          "totalMeasurements": {
            "type": "integer",
            "description": "Total number of measurements recorded.",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "Statistics summary of body metrics."
      },
      "ChangePasswordRequest": {
        "required": [
          "confirmPassword",
          "currentPassword",
          "newPassword"
        ],
        "type": "object",
        "properties": {
          "currentPassword": {
            "minLength": 1,
            "type": "string",
            "description": "Current password for verification."
          },
          "newPassword": {
            "minLength": 1,
            "type": "string",
            "description": "New password."
          },
          "confirmPassword": {
            "minLength": 1,
            "type": "string",
            "description": "Confirmation of the new password."
          }
        },
        "additionalProperties": false,
        "description": "Request to change user password."
      },
      "CompleteScheduledRequest": {
        "type": "object",
        "properties": {
          "startedAtUtc": {
            "type": "string",
            "description": "Optional start time of the session. Defaults to now if not provided.",
            "format": "date-time",
            "nullable": true
          },
          "completedAtUtc": {
            "type": "string",
            "description": "Optional completion time of the session. Defaults to now if not provided.",
            "format": "date-time",
            "nullable": true
          },
          "sessionNotes": {
            "type": "string",
            "description": "Optional notes for the completed session.",
            "nullable": true
          },
          "populateActuals": {
            "type": "boolean",
            "description": "If true, copies planned reps/weight to actual reps/weight for each set. Defaults to true."
          }
        },
        "additionalProperties": false,
        "description": "Request to mark a scheduled workout as completed."
      },
      "CompleteSessionRequest": {
        "type": "object",
        "properties": {
          "sessionNotes": {
            "maxLength": 1000,
            "type": "string",
            "nullable": true
          },
          "completedAtUtc": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to complete a workout session."
      },
      "CreateBodyMeasurementDto": {
        "type": "object",
        "properties": {
          "weightKg": {
            "type": "number",
            "description": "Body weight in kilograms.",
            "format": "double"
          },
          "heightCm": {
            "type": "integer",
            "description": "Height in centimeters.",
            "format": "int32"
          },
          "bodyFatPercentage": {
            "type": "number",
            "description": "Optional body fat percentage.",
            "format": "double",
            "nullable": true
          },
          "chestCm": {
            "type": "integer",
            "description": "Optional chest circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "waistCm": {
            "type": "integer",
            "description": "Optional waist circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "hipsCm": {
            "type": "integer",
            "description": "Optional hips circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "bicepsCm": {
            "type": "integer",
            "description": "Optional biceps circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "thighsCm": {
            "type": "integer",
            "description": "Optional thighs circumference in centimeters.",
            "format": "int32",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "description": "Optional notes about the measurement.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to create a new body measurement."
      },
      "CreatePlanDto": {
        "required": [
          "planName",
          "type"
        ],
        "type": "object",
        "properties": {
          "planName": {
            "maxLength": 100,
            "minLength": 3,
            "type": "string"
          },
          "type": {
            "maxLength": 50,
            "minLength": 2,
            "type": "string"
          },
          "notes": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "nullable": true
          },
          "exercises": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExerciseDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Data transfer object for creating a new workout plan."
      },
      "CreateScheduledDto": {
        "required": [
          "date",
          "planId"
        ],
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "Date of the workout.",
            "format": "date"
          },
          "time": {
            "type": "string",
            "description": "Optional time of the workout.",
            "format": "time",
            "nullable": true,
            "example": "18:30"
          },
          "planId": {
            "type": "string",
            "description": "ID of the plan to schedule.",
            "format": "uuid"
          },
          "planName": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string",
            "description": "Optional name of the plan (if overriding or for display).",
            "nullable": true
          },
          "notes": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Optional notes for the workout.",
            "nullable": true
          },
          "exercises": {
            "maxItems": 100,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExerciseDto"
            },
            "description": "List of exercises to include.",
            "nullable": true
          },
          "status": {
            "pattern": "(?i)^(planned|completed)$",
            "type": "string",
            "description": "Status of the workout.\nPossible values: \"planned\", \"completed\".",
            "nullable": true
          },
          "visibleToFriends": {
            "type": "boolean",
            "description": "Whether to make this workout visible to friends."
          }
        },
        "additionalProperties": false,
        "description": "Data transfer object for creating or updating a scheduled workout."
      },
      "CreateUserDto": {
        "required": [
          "email",
          "fullName",
          "userName"
        ],
        "type": "object",
        "properties": {
          "fullName": {
            "maxLength": 100,
            "minLength": 1,
            "type": "string"
          },
          "email": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string",
            "format": "email"
          },
          "userName": {
            "maxLength": 50,
            "minLength": 3,
            "pattern": "^[A-Za-z0-9._-]+$",
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Data transfer object for creating a new user."
      },
      "DeleteAccountDto": {
        "required": [
          "password"
        ],
        "type": "object",
        "properties": {
          "password": {
            "minLength": 1,
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "E1rmPointDto": {
        "type": "object",
        "properties": {
          "day": {
            "type": "string",
            "description": "The date of this E1RM measurement.",
            "format": "date"
          },
          "e1Rm": {
            "type": "number",
            "description": "Estimated 1-rep max value calculated using Epley formula.",
            "format": "double"
          },
          "sessionId": {
            "type": "string",
            "description": "ID of the workout session where this E1RM was achieved, if applicable.",
            "format": "uuid",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a data point for estimated 1-rep max over time."
      },
      "ExerciseDto": {
        "required": [
          "name"
        ],
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 1,
            "type": "string"
          },
          "rest": {
            "maximum": 3600,
            "minimum": 0,
            "type": "integer",
            "format": "int32"
          },
          "sets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SetDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents an exercise within a workout plan."
      },
      "ExerciseSummaryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the exercise.",
            "nullable": true
          },
          "workoutCount": {
            "type": "integer",
            "description": "Number of workout sessions containing this exercise.",
            "format": "int32"
          },
          "firstPerformedUtc": {
            "type": "string",
            "description": "First time this exercise was performed (UTC).",
            "format": "date-time"
          },
          "lastPerformedUtc": {
            "type": "string",
            "description": "Most recent time this exercise was performed (UTC).",
            "format": "date-time"
          }
        },
        "additionalProperties": false,
        "description": "Represents a summary of an exercise performed by the user."
      },
      "FriendDto": {
        "required": [
          "userId",
          "userName"
        ],
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "description": "Unique identifier of the friend user.",
            "format": "uuid"
          },
          "userName": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Username of the friend."
          }
        },
        "additionalProperties": false,
        "description": "Represents a friend in the user's friend list."
      },
      "FriendRequestDto": {
        "required": [
          "createdAtUtc",
          "fromName",
          "fromUserId",
          "id",
          "status",
          "toName",
          "toUserId"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the friendship request.",
            "format": "uuid"
          },
          "fromUserId": {
            "type": "string",
            "description": "ID of the user who sent the request.",
            "format": "uuid"
          },
          "fromName": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Username of the requester."
          },
          "toUserId": {
            "type": "string",
            "description": "ID of the user who received the request.",
            "format": "uuid"
          },
          "toName": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Username of the recipient."
          },
          "status": {
            "minLength": 1,
            "pattern": "Pending|Accepted|Rejected",
            "type": "string",
            "description": "Current status of the request.\nPossible values: \"Pending\", \"Accepted\", \"Rejected\"."
          },
          "createdAtUtc": {
            "type": "string",
            "description": "Date and time when the request was created.",
            "format": "date-time"
          },
          "respondedAtUtc": {
            "type": "string",
            "description": "Date and time when the request was responded to.",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a friendship request between two users."
      },
      "FriendScheduledWorkoutDto": {
        "type": "object",
        "properties": {
          "scheduledId": {
            "type": "string",
            "description": "Unique identifier of the scheduled workout.",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "description": "ID of the friend user who owns this workout.",
            "format": "uuid"
          },
          "userName": {
            "type": "string",
            "description": "Username of the friend.",
            "nullable": true
          },
          "fullName": {
            "type": "string",
            "description": "Full name of the friend.",
            "nullable": true
          },
          "date": {
            "type": "string",
            "description": "Date of the scheduled workout.",
            "format": "date"
          },
          "time": {
            "type": "string",
            "description": "Optional time of the workout.",
            "format": "time",
            "nullable": true,
            "example": "18:30"
          },
          "planName": {
            "type": "string",
            "description": "Name of the workout plan.",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Status of the workout.\nPossible values: \"planned\", \"completed\".",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a scheduled workout from a friend's timeline."
      },
      "FriendWorkoutSessionDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "Unique identifier of the workout session.",
            "format": "uuid"
          },
          "scheduledId": {
            "type": "string",
            "description": "ID of the scheduled workout this session is based on.",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "description": "ID of the friend user who performed this session.",
            "format": "uuid"
          },
          "userName": {
            "type": "string",
            "description": "Username of the friend.",
            "nullable": true
          },
          "fullName": {
            "type": "string",
            "description": "Full name of the friend.",
            "nullable": true
          },
          "planName": {
            "type": "string",
            "description": "Name of the workout plan.",
            "nullable": true
          },
          "startedAtUtc": {
            "type": "string",
            "description": "Start time of the session in UTC.",
            "format": "date-time"
          },
          "completedAtUtc": {
            "type": "string",
            "description": "Completion time of the session in UTC (if completed).",
            "format": "date-time",
            "nullable": true
          },
          "durationSec": {
            "type": "integer",
            "description": "Duration of the session in seconds.",
            "format": "int32",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Status of the session.\nPossible values: \"in_progress\", \"completed\", \"aborted\".",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a workout session from a friend's timeline."
      },
      "LoginRequest": {
        "required": [
          "password",
          "userNameOrEmail"
        ],
        "type": "object",
        "properties": {
          "userNameOrEmail": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string"
          },
          "password": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Request to log in a user."
      },
      "LogoutRequestDto": {
        "required": [
          "refreshToken"
        ],
        "type": "object",
        "properties": {
          "refreshToken": {
            "maxLength": 512,
            "minLength": 0,
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Request to log out a user."
      },
      "OverviewDto": {
        "type": "object",
        "properties": {
          "totalVolume": {
            "type": "number",
            "description": "Total volume (weight × reps) across all sessions.",
            "format": "double"
          },
          "avgWeight": {
            "type": "number",
            "description": "Average weight used across all sets.",
            "format": "double"
          },
          "sessionsCount": {
            "type": "integer",
            "description": "Total number of workout sessions.",
            "format": "int32"
          },
          "adherencePct": {
            "type": "number",
            "description": "Adherence percentage (completed workouts / planned workouts × 100).",
            "format": "double"
          },
          "newPrs": {
            "type": "integer",
            "description": "Number of new personal records achieved.",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "Represents an overview of workout statistics."
      },
      "PatchSetRequest": {
        "type": "object",
        "properties": {
          "repsDone": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "weightDone": {
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "rpe": {
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "isFailure": {
            "type": "boolean",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to update a specific set in a workout session."
      },
      "PlanDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "sharedPlanId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "planName": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "nullable": true
          },
          "exercises": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExerciseDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a workout plan."
      },
      "PlanVsActualItemDto": {
        "type": "object",
        "properties": {
          "exerciseName": {
            "type": "string",
            "description": "Name of the exercise.",
            "nullable": true
          },
          "setNumber": {
            "type": "integer",
            "description": "Set number within the exercise.",
            "format": "int32"
          },
          "repsPlanned": {
            "type": "integer",
            "description": "Number of reps planned for this set.",
            "format": "int32"
          },
          "weightPlanned": {
            "type": "number",
            "description": "Weight planned for this set.",
            "format": "double"
          },
          "repsDone": {
            "type": "integer",
            "description": "Number of reps actually completed, or null if not performed.",
            "format": "int32",
            "nullable": true
          },
          "weightDone": {
            "type": "number",
            "description": "Weight actually used, or null if not performed.",
            "format": "double",
            "nullable": true
          },
          "rpe": {
            "type": "number",
            "description": "Rate of Perceived Exertion (RPE) for this set, if recorded.",
            "format": "double",
            "nullable": true
          },
          "isFailure": {
            "type": "boolean",
            "description": "Indicates whether this set was performed to failure.",
            "nullable": true
          },
          "isExtra": {
            "type": "boolean",
            "description": "Indicates whether this set was an extra set not in the original plan."
          },
          "repsDiff": {
            "type": "integer",
            "description": "Difference between actual and planned reps (RepsDone - RepsPlanned).",
            "format": "int32",
            "readOnly": true
          },
          "weightDiff": {
            "type": "number",
            "description": "Difference between actual and planned weight (WeightDone - WeightPlanned).",
            "format": "double",
            "readOnly": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a comparison between planned and actual performance for an exercise."
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "RefreshRequestDto": {
        "required": [
          "refreshToken"
        ],
        "type": "object",
        "properties": {
          "refreshToken": {
            "maxLength": 512,
            "minLength": 0,
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Request to refresh an authentication token."
      },
      "RegisterRequest": {
        "required": [
          "email",
          "fullName",
          "password",
          "userName"
        ],
        "type": "object",
        "properties": {
          "email": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string",
            "format": "email"
          },
          "password": {
            "minLength": 1,
            "type": "string"
          },
          "fullName": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string"
          },
          "userName": {
            "maxLength": 50,
            "minLength": 3,
            "pattern": "^[A-Za-z0-9._-]+$",
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Request to register a new user."
      },
      "ResetPasswordDto": {
        "required": [
          "newPassword"
        ],
        "type": "object",
        "properties": {
          "newPassword": {
            "minLength": 1,
            "type": "string"
          }
        },
        "additionalProperties": false,
        "description": "Data transfer object for resetting a user's password."
      },
      "RespondFriendRequest": {
        "required": [
          "accept"
        ],
        "type": "object",
        "properties": {
          "accept": {
            "type": "boolean",
            "description": "Whether to accept (true) or reject (false) the friendship request."
          }
        },
        "additionalProperties": false,
        "description": "Request to respond to a friendship request."
      },
      "RespondSharedPlanRequest": {
        "type": "object",
        "properties": {
          "accept": {
            "type": "boolean",
            "description": "Decision: true = Accept, false = Reject."
          }
        },
        "additionalProperties": false,
        "description": "Request model for responding to a shared plan."
      },
      "ScheduledDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the scheduled workout.",
            "format": "uuid"
          },
          "date": {
            "type": "string",
            "description": "Date of the scheduled workout.",
            "format": "date"
          },
          "time": {
            "type": "string",
            "description": "Optional time of the scheduled workout.",
            "format": "time",
            "nullable": true,
            "example": "18:30"
          },
          "planId": {
            "type": "string",
            "description": "ID of the plan used for this workout.",
            "format": "uuid"
          },
          "planName": {
            "type": "string",
            "description": "Name of the plan.",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "description": "Optional notes for the scheduled workout.",
            "nullable": true
          },
          "exercises": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExerciseDto"
            },
            "description": "List of exercises in the scheduled workout.",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Status of the workout.\nPossible values: \"planned\", \"completed\".",
            "nullable": true
          },
          "visibleToFriends": {
            "type": "boolean",
            "description": "Whether this workout is visible to friends."
          }
        },
        "additionalProperties": false,
        "description": "Represents a scheduled workout."
      },
      "SessionExerciseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "order": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "restSecPlanned": {
            "type": "integer",
            "format": "int32"
          },
          "restSecActual": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "sets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SessionSetDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents an exercise performed during a workout session."
      },
      "SessionSetDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "setNumber": {
            "type": "integer",
            "format": "int32"
          },
          "repsPlanned": {
            "type": "integer",
            "format": "int32"
          },
          "weightPlanned": {
            "type": "number",
            "format": "double"
          },
          "repsDone": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "weightDone": {
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "rpe": {
            "type": "number",
            "format": "double",
            "nullable": true
          },
          "isFailure": {
            "type": "boolean",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a set performed during a workout session."
      },
      "SetDto": {
        "type": "object",
        "properties": {
          "reps": {
            "maximum": 1000,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          },
          "weight": {
            "maximum": 1000,
            "minimum": 0,
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false,
        "description": "Represents a set within an exercise."
      },
      "SharedPlanDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the shared plan record.",
            "format": "uuid"
          },
          "planId": {
            "type": "string",
            "description": "ID of the plan being shared.",
            "format": "uuid"
          },
          "planName": {
            "type": "string",
            "description": "Name of the plan.",
            "nullable": true
          },
          "sharedByName": {
            "type": "string",
            "description": "Name of the user who shared the plan.",
            "nullable": true
          },
          "sharedWithName": {
            "type": "string",
            "description": "Name of the user with whom the plan is shared.",
            "nullable": true
          },
          "sharedAtUtc": {
            "type": "string",
            "description": "Date and time when the plan was shared.",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "description": "Status of the shared plan.\nPossible values: \"Pending\", \"Accepted\", \"Rejected\".",
            "nullable": true
          },
          "respondedAtUtc": {
            "type": "string",
            "description": "Date and time when the recipient responded to the share request.",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a workout plan shared between users."
      },
      "StartSessionRequest": {
        "required": [
          "scheduledId"
        ],
        "type": "object",
        "properties": {
          "scheduledId": {
            "type": "string",
            "format": "uuid"
          }
        },
        "additionalProperties": false,
        "description": "Request to start a new workout session."
      },
      "TargetWeightDto": {
        "type": "object",
        "properties": {
          "targetWeightKg": {
            "type": "number",
            "description": "Target weight goal in kilograms.",
            "format": "double",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents the user's target weight."
      },
      "TimePointDto": {
        "type": "object",
        "properties": {
          "period": {
            "type": "string",
            "description": "The time period for this data point (e.g., \"2024-01-15\" for day, \"2024-W03\" for week).",
            "nullable": true
          },
          "value": {
            "type": "number",
            "description": "The volume value for this period.",
            "format": "double"
          },
          "exerciseName": {
            "type": "string",
            "description": "Name of the exercise if grouped by exercise, otherwise null.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a data point for volume over time."
      },
      "UpdateBiometricsPrivacyRequest": {
        "required": [
          "shareWithFriends"
        ],
        "type": "object",
        "properties": {
          "shareWithFriends": {
            "type": "boolean",
            "description": "Whether to share biometric data with friends."
          }
        },
        "additionalProperties": false,
        "description": "Request to update biometrics privacy setting."
      },
      "UpdateProfileRequest": {
        "required": [
          "userName"
        ],
        "type": "object",
        "properties": {
          "userName": {
            "maxLength": 50,
            "minLength": 3,
            "pattern": "^[A-Za-z0-9._-]+$",
            "type": "string",
            "description": "New username."
          },
          "fullName": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "New full name.",
            "nullable": true
          },
          "email": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string",
            "description": "New email address.",
            "format": "email",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to update user profile information."
      },
      "UpdateTargetWeightRequest": {
        "type": "object",
        "properties": {
          "targetWeightKg": {
            "type": "number",
            "description": "Target weight goal in kilograms (40-200 kg). Use null or 0 to clear.",
            "format": "double",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Request to update target weight."
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "fullName": {
            "maxLength": 100,
            "minLength": 1,
            "type": "string",
            "nullable": true
          },
          "email": {
            "maxLength": 200,
            "minLength": 0,
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "userName": {
            "maxLength": 50,
            "minLength": 3,
            "pattern": "^[A-Za-z0-9._-]+$",
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Data transfer object for updating an existing user."
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the user.",
            "format": "uuid"
          },
          "fullName": {
            "type": "string",
            "description": "Full name of the user.",
            "nullable": true
          },
          "email": {
            "type": "string",
            "description": "Email address of the user.",
            "nullable": true
          },
          "userName": {
            "type": "string",
            "description": "Unique username.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a user in the system."
      },
      "UserProfileDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the user.",
            "format": "uuid"
          },
          "userName": {
            "type": "string",
            "description": "Unique username.",
            "nullable": true
          },
          "fullName": {
            "type": "string",
            "description": "Full name of the user.",
            "nullable": true
          },
          "email": {
            "type": "string",
            "description": "Email address of the user.",
            "nullable": true
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of roles assigned to the user.",
            "nullable": true
          },
          "targetWeightKg": {
            "type": "number",
            "description": "Target weight goal in kilograms.",
            "format": "double",
            "nullable": true
          },
          "shareBiometricsWithFriends": {
            "type": "boolean",
            "description": "Whether biometric data is shared with friends."
          }
        },
        "additionalProperties": false,
        "description": "Represents the profile of a user."
      },
      "UserSummaryDto": {
        "type": "object",
        "properties": {
          "userName": {
            "type": "string",
            "description": "The user's unique username.",
            "nullable": true
          },
          "fullName": {
            "type": "string",
            "description": "The user's full name.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Simplified user information for search results."
      },
      "WorkoutSessionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "scheduledId": {
            "type": "string",
            "format": "uuid"
          },
          "startedAtUtc": {
            "type": "string",
            "format": "date-time"
          },
          "completedAtUtc": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "durationSec": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Current status of the session.\nPossible values: \"in_progress\", \"completed\", \"aborted\".",
            "nullable": true
          },
          "sessionNotes": {
            "type": "string",
            "nullable": true
          },
          "exercises": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SessionExerciseDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a workout session."
      }
    },
    "securitySchemes": {
      "oauth2": {
        "type": "http",
        "description": "Wklej SAM token (bez 'Bearer ')",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}